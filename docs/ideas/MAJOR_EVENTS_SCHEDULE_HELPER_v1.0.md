# 주요일정 스케줄 도우미 기획서 v1.0

> 공휴일, 연휴, 생일, 기념일, 시즌 이벤트 등 주요 일정을 자동 등록·알림하는 도우미
> 작성일: 2026-02-19 | 버전: 1.0

---

## 개요

사용자가 한 번 설정하면, 공휴일·기념일·생일 등 반복되는 주요 일정을 매년 자동으로 캘린더에 등록하고 사전 알림을 제공하는 도우미 기능.

**핵심 가치**
- 놓치지 않는 일정 관리 — 공휴일, 생일, 기념일을 자동으로 캘린더에 반영
- 사전 준비 알림 — "3일 전", "1주일 전" 등 준비 기간에 맞춘 리마인더
- 한국 맞춤 — 대한민국 공휴일 + 대체공휴일 + 24절기 자동 반영
- 개인화 — 사용자별 생일, 기념일, 연차 계획을 관리

---

## 도우미 ID

| ID | 도우미 | 설명 | 우선순위 |
|----|--------|------|----------|
| H12 | 주요일정 스케줄 도우미 | 공휴일·기념일·생일 자동 등록 및 알림 | Phase 2 확장 도우미 |

> SCHEDULE_HELPER_PLAN_v1.0.md의 도우미 체계에 H12로 편입

---

## 일정 카테고리

### 1. 대한민국 공휴일 (자동)

| 일정 | 날짜 | 유형 | 비고 |
|------|------|------|------|
| 신정 | 1월 1일 | 고정 | |
| 설날 | 음력 1월 1일 ±1일 | 음력 변동 | 3일 연휴, 대체공휴일 적용 |
| 삼일절 | 3월 1일 | 고정 | |
| 어린이날 | 5월 5일 | 고정 | 대체공휴일 적용 |
| 부처님 오신 날 | 음력 4월 8일 | 음력 변동 | 대체공휴일 적용 |
| 현충일 | 6월 6일 | 고정 | |
| 광복절 | 8월 15일 | 고정 | 대체공휴일 적용 |
| 추석 | 음력 8월 15일 ±1일 | 음력 변동 | 3일 연휴, 대체공휴일 적용 |
| 개천절 | 10월 3일 | 고정 | |
| 한글날 | 10월 9일 | 고정 | |
| 크리스마스 | 12월 25일 | 고정 | |

**대체공휴일 로직**:
- 설날·추석 연휴가 일요일과 겹치면 다음 평일이 대체공휴일
- 어린이날·광복절·개천절·한글날이 토/일 겹치면 다음 월요일이 대체공휴일
- 부처님 오신 날·크리스마스가 토/일 겹치면 다음 월요일이 대체공휴일 (2023년~)

### 2. 연휴·징검다리 연휴 (자동 감지)

| 유형 | 설명 | 예시 |
|------|------|------|
| 황금 연휴 | 공휴일 + 주말 조합 3일 이상 | 금요일 공휴일 → 금토일 3일 연휴 |
| 징검다리 연휴 | 공휴일 사이 평일 1일 | 화 공휴일 + 수 평일 + 목 공휴일 |
| 연차 추천 | 1~2일 연차로 장기 연휴 가능 | "수요일 연차 사용 시 5일 연휴" |

**자동 분석 기능**:
- 매년 초 해당 연도의 모든 연휴 조합을 분석
- 최소 연차로 최대 연휴를 만드는 조합 추천
- "올해 연차 효율 TOP 5" 형태로 표시

### 3. 생일 관리

| 항목 | 설명 |
|------|------|
| 양력 생일 | 일반 생일 등록 |
| 음력 생일 | 음력 날짜 입력 → 매년 양력 자동 변환 |
| 관계 태그 | 가족, 친구, 직장동료, 연인 등 |
| D-Day 카운트 | "아빠 생일까지 12일" |
| 준비 알림 | 관계별 다른 알림 주기 (가족: 1주전, 친구: 3일전) |
| 선물 메모 | "작년에 넥타이 줌", "올해 희망: 운동화" |

### 4. 기념일

| 유형 | 예시 | 반복 |
|------|------|------|
| 연인 기념일 | 100일, 200일, 300일, 1주년, 2주년... | 자동 계산 |
| 결혼 기념일 | 결혼식 날짜 기준 매년 반복 | 매년 |
| 입사일 | 근속 연수 자동 계산 | 매년 |
| 졸업/입학 | 학교별 기념일 | 매년 |
| 추모일 | 기일 (음력/양력 선택 가능) | 매년 |
| 커스텀 기념일 | 사용자 자유 등록 | 설정 가능 |

**100일 단위 자동 계산**:
- 시작일 입력 시 100일, 200일, 300일... 자동 생성
- 1주년, 2주년... 연 단위도 동시 생성
- 중요도에 따라 알림 유무 설정

### 5. 시즌/이벤트 일정

| 시즌 | 주요 일정 | 시기 |
|------|----------|------|
| 봄 | 벚꽃 시즌, 봄맞이 대청소 | 3~4월 |
| 여름 | 장마 시작, 휴가 시즌, 복날 | 6~8월 |
| 가을 | 단풍 시즌, 김장 시즌 | 9~11월 |
| 겨울 | 연말정산, 송년회 시즌 | 11~12월 |
| 연중 | 발렌타인데이, 화이트데이, 빼빼로데이 | 고정 |

### 6. 24절기 (선택)

| 절기 | 시기 | 의미 |
|------|------|------|
| 입춘 | 2월 초 | 봄의 시작 |
| 경칩 | 3월 초 | 개구리 깨어남 |
| 춘분 | 3월 중 | 낮밤 같아짐 |
| ... | ... | ... |
| 동지 | 12월 중 | 밤이 가장 긴 날 |
| 소한/대한 | 1월 | 가장 추운 시기 |

> 24절기는 매년 날짜가 1~2일 변동 → 천문학적 계산 또는 외부 API 활용

---

## 사용자 플로우

### 초기 설정 (온보딩)

```
[앱 진입] → [주요일정 도우미 선택]
         → Step 1: 공휴일 자동 등록 (기본 ON)
         → Step 2: 생일 등록 (가족/친구/동료)
         → Step 3: 기념일 등록 (연인/결혼/입사 등)
         → Step 4: 시즌 이벤트 선택 (관심 항목 체크)
         → Step 5: 알림 설정 (기본값 제공)
         → [캘린더에 일괄 등록]
```

### 채팅 기반 등록

```
사용자: "엄마 생일 등록해줘. 음력 3월 15일이야"
AI: 📅 생일 등록
    이름: 엄마
    날짜: 음력 3월 15일 (2026년 양력 5월 1일)
    관계: 가족
    알림: 1주일 전, 당일
    [확인] [수정]

사용자: "올해 연차 효율 좋은 날 알려줘"
AI: 🏖️ 2026년 연차 효율 TOP 5
    1. 6/8(월) 연차 → 6/6(토)~6/9(일) 4일 연휴
    2. 10/5(월)~10/7(수) 연차 3일 → 10/3(금)~10/12(일) 10일 연휴
    ...
    [캘린더에 표시] [연차 등록]

사용자: "여자친구랑 사귄 날 3월 14일이야"
AI: 💑 기념일 등록
    시작일: 2026-03-14
    자동 생성 일정:
    - 100일: 2026-06-22
    - 200일: 2026-09-30
    - 300일: 2027-01-08
    - 1주년: 2027-03-14
    [전체 등록] [선택 등록]
```

---

## 데이터 모델

### Firestore 컬렉션 구조

```javascript
// users/{userId}/majorEvents/{eventId}
{
  type: 'holiday' | 'birthday' | 'anniversary' | 'season' | 'custom',
  title: '엄마 생일',
  date: {
    type: 'solar' | 'lunar',        // 양력 / 음력
    month: 3,
    day: 15,
    year: null,                      // null이면 매년 반복
  },
  startDate: '2024-03-14',          // 기념일 시작일 (100일 계산용)
  relation: 'family',               // 관계 태그
  reminder: {
    enabled: true,
    daysBefore: [7, 1, 0],          // 7일 전, 1일 전, 당일
  },
  memo: '작년: 넥타이, 올해 희망: 운동화',
  recurring: true,                   // 매년 반복 여부
  autoGenerate: true,                // 캘린더 자동 등록 여부
  category: 'personal',             // 기존 카테고리 체계 활용
  createdAt: Timestamp,
  updatedAt: Timestamp,
}
```

### 캘린더 이벤트 자동 생성

```javascript
// events 컬렉션에 자동 생성되는 이벤트
{
  userId: 'xxx',
  title: '🎂 엄마 생일',
  startTime: Timestamp,              // 해당 연도의 실제 날짜
  endTime: null,                     // 종일 이벤트
  category: 'personal',
  isAllDay: true,
  source: 'major_events_helper',     // 도우미가 생성한 이벤트 표시
  majorEventId: 'xxx',               // 원본 주요일정 ID 참조
  createdVia: 'helper',
}
```

---

## 기술 구현 계획

### Phase 1: 공휴일 자동 등록 (MVP)

**범위**: 대한민국 공휴일 + 대체공휴일 자동 캘린더 등록

| 작업 | 설명 | 예상 시간 |
|------|------|----------|
| 공휴일 데이터 | 고정 공휴일 + 음력 변환 로직 | 3h |
| 대체공휴일 계산 | 토/일 겹침 시 대체일 계산 | 2h |
| 캘린더 표시 | 공휴일을 캘린더에 특별 마킹 | 2h |
| 연휴 분석 | 징검다리·황금연휴 자동 감지 | 2h |
| **소계** | | **9h** |

**음력 변환 방안**:
- 옵션 A: `korean-lunar-calendar` npm 패키지 활용 (경량, 오프라인)
- 옵션 B: 한국천문연구원 API 활용 (정확, 네트워크 필요)
- **추천**: 옵션 A 기본 + 옵션 B 검증용

### Phase 2: 생일·기념일

**범위**: 개인 생일/기념일 등록 + 알림 + 100일 단위 자동 계산

| 작업 | 설명 | 예상 시간 |
|------|------|----------|
| 주요일정 등록 UI | 생일/기념일 입력 폼 | 3h |
| 음력 생일 지원 | 음력→양력 매년 자동 변환 | 2h |
| 100일 계산기 | 시작일 기준 100일 단위 생성 | 1h |
| 알림 시스템 | 사전 알림 (N일 전) | 3h |
| 채팅 연동 | "생일 등록해줘" GPT 프롬프트 | 2h |
| **소계** | | **11h** |

### Phase 3: 연차 최적화 + 시즌 이벤트

**범위**: 연차 효율 분석 + 시즌별 이벤트 알림

| 작업 | 설명 | 예상 시간 |
|------|------|----------|
| 연차 효율 분석 | 최소 연차 → 최대 연휴 알고리즘 | 4h |
| 연차 등록 연동 | 분석 결과 → 캘린더 직접 등록 | 2h |
| 시즌 이벤트 | 계절별 이벤트 데이터 + 토글 | 2h |
| 24절기 (선택) | 절기 계산 + 캘린더 표시 | 2h |
| **소계** | | **10h** |

---

## GPT 프롬프트 확장

### 주요일정 도우미용 시스템 프롬프트 추가

```
당신은 주요일정 관리 도우미입니다.
사용자가 생일, 기념일, 공휴일 관련 요청을 하면 다음 JSON 형식으로 응답합니다:

{
  "action": "create_major_event",
  "eventType": "birthday|anniversary|holiday|custom",
  "data": {
    "title": "엄마 생일",
    "dateType": "lunar|solar",
    "month": 3,
    "day": 15,
    "relation": "family|friend|colleague|lover",
    "startDate": "2024-03-14",  // 기념일 시작일
    "reminder": [7, 1, 0],
    "recurring": true,
    "memo": ""
  }
}

연차 관련 요청 시:
{
  "action": "analyze_vacation",
  "year": 2026,
  "remainingDays": 15  // 사용자 잔여 연차
}
```

---

## UI/UX 설계

### 캘린더 표시 방식

| 일정 유형 | 색상 | 아이콘 | 표시 |
|----------|------|--------|------|
| 공휴일 | 빨간색 (`red-500`) | 🏴 | 날짜 숫자를 빨간색으로 표시 |
| 생일 | 분홍색 (`pink-400`) | 🎂 | 이벤트 바 |
| 기념일 | 보라색 (`purple-400`) | 💜 | 이벤트 바 |
| 연차 추천 | 초록색 (`green-400`) | 🏖️ | 점선 표시 |
| 시즌 이벤트 | 주황색 (`orange-400`) | 📅 | 작은 도트 |

### 주요일정 관리 화면

```
┌─────────────────────────────────┐
│  📋 주요일정 관리               │
├─────────────────────────────────┤
│  [공휴일] [생일] [기념일] [시즌] │
├─────────────────────────────────┤
│                                 │
│  🎂 가족 생일                   │
│  ├─ 엄마  음력 3/15 (양력 5/1)  │
│  ├─ 아빠  양력 7/22             │
│  └─ 동생  양력 11/3             │
│                                 │
│  💜 기념일                       │
│  ├─ 연인 기념일  3/14 (D+347)   │
│  │  └─ 다음: 200일 (9/30)       │
│  └─ 결혼 기념일  6/15 (3주년)   │
│                                 │
│  🏖️ 연차 추천 (2026)            │
│  ├─ 6/8(월) 1일 → 4일 연휴      │
│  └─ 10/5~7 3일 → 10일 연휴     │
│                                 │
│  [+ 새 일정 추가]                │
└─────────────────────────────────┘
```

### DailyScheduleView 연동

주요일정 도우미의 이벤트도 기존 DailyScheduleView의 카테고리 필터에 통합:

| 카테고리 | 표시 |
|---------|------|
| `holiday` | 공휴일 탭 추가 |
| `birthday` | personal 탭에 포함 |
| `anniversary` | personal 탭에 포함 |

---

## 알림 전략

### 관계별 기본 알림 설정

| 관계 | 알림 시점 | 이유 |
|------|----------|------|
| 가족 | 1주전, 3일전, 당일 | 선물 준비 + 모임 계획 |
| 연인 | 1주전, 3일전, 1일전, 당일 | 이벤트 준비 |
| 친구 | 3일전, 당일 | 축하 메시지 준비 |
| 직장동료 | 1일전, 당일 | 간단한 축하 |
| 공휴일 | 1주전 | 연휴 계획 |
| 기념일 | 1주전, 3일전, 당일 | 이벤트 준비 |

### 알림 메시지 예시

```
🎂 [3일 후] 엄마 생일이에요!
   음력 3월 15일 (양력 5월 1일)
   📝 메모: 올해 희망 — 운동화
   [선물 검색] [축하 메시지 준비]

🏖️ [다음 주] 현충일 연휴 (6/6~6/8)
   연차 1일 사용 시 4일 연휴 가능!
   [연차 신청] [여행 계획]

💑 [오늘] 200일 기념일이에요!
   2026-03-14부터 200일째
   [축하 이벤트 아이디어]
```

---

## 외부 데이터 연동

### 공휴일 데이터 소스

| 소스 | 용도 | 비용 |
|------|------|------|
| 공공데이터포털 API | 대한민국 공휴일 공식 데이터 | 무료 |
| korean-lunar-calendar (npm) | 음력↔양력 변환 | 무료 |
| 한국천문연구원 | 24절기 정확한 날짜 | 무료 |
| 내부 하드코딩 | 고정 공휴일 백업 | - |

### 글로벌 확장 가능성 (향후)

| 국가 | API | 비고 |
|------|-----|------|
| 미국 | Nager.Date API | 주별 공휴일 차이 |
| 일본 | holidays-jp | 일왕 관련 변동 |
| 글로벌 | Calendarific API | 230개국 지원, 유료 |

---

## 기존 시스템 연동 포인트

| 기존 모듈 | 연동 방식 |
|-----------|----------|
| `openai.js` | 생일/기념일 파싱용 GPT 프롬프트 확장 |
| `schedule.js` | `addEvent()` 활용하여 캘린더에 등록 |
| `CalendarView.jsx` | 공휴일 빨간색 표시, 이벤트 바 렌더링 |
| `DailyScheduleView.jsx` | 카테고리 필터에 holiday 탭 추가 |
| `ChatInterface.jsx` | "생일 등록" 등 주요일정 관련 인텐트 감지 |
| `helperProfile.js` | 주요일정 도우미 프로필 저장 |
| `dateParser.js` | 음력 날짜 파싱 로직 확장 |

---

## 성공 지표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 공휴일 정확도 | 100% | 실제 공휴일과 대조 |
| 음력 변환 정확도 | 100% | 한국천문연구원 데이터와 대조 |
| 생일 등록 수 | 평균 5개 이상/사용자 | Firestore 집계 |
| 연차 추천 활용률 | 30% 이상 | 추천 → 등록 전환율 |
| 사전 알림 만족도 | 4.0/5.0 이상 | 인앱 피드백 |

---

## 향후 확장 아이디어

- **공유 기념일**: 가족 그룹, 커플 간 기념일 공유
- **선물 추천 AI**: 관계·취향·예산 기반 선물 추천
- **축하 메시지 생성**: GPT 기반 상황별 축하 문구 자동 생성
- **사진 연동**: 기념일에 과거 사진 자동 회상 (갤러리 연동)
- **해외 공휴일**: 글로벌 사용자를 위한 국가별 공휴일 지원
- **D-Day 위젯**: 홈 화면에 주요 기념일 D-Day 카운트 위젯
